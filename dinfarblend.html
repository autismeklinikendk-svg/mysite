<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dinfar Blend Calc</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

<style>
:root {
  --accent: #c41e3a;
  --glass: rgba(0,0,0,0.65);
  --border: rgba(255,255,255,0.08);
  --powder-color: #8B0000;      /* Dark red - powders */
  --ba-color: #008000;          /* Green - BA */
  --bb-color: #FFD700;          /* Gold yellow - BB */
  --extra-solvent-color: #FF8C00; /* Orange - Extra Solvent */
  --carrier-color: #DA70D6;     /* Bright purple - Carrier oils */
}

* { box-sizing: border-box; font-family: Inter, system-ui, -apple-system, sans-serif; }

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url("https://images7.alphacoders.com/398/398372.jpg") center / cover no-repeat fixed;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}

.panel { width: 100%; max-width: 1200px; background: var(--glass); backdrop-filter: blur(14px); border: 1px solid var(--border); border-radius: 20px; padding: 30px; box-shadow: 0 40px 90px rgba(0,0,0,0.7); display: flex; flex-direction: column; }

h1 { margin: 0 0 6px; font-size: 32px; letter-spacing: 0.6px; text-align: center; }
.subtitle { opacity: 0.7; margin-bottom: 26px; text-align: center; }

.links { margin-bottom: 30px; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
.links a { padding: 12px 24px; background: rgba(196,30,58,0.2); border: 1px solid var(--accent); border-radius: 12px; color: #fff; text-decoration: none; font-weight: 600; transition: background 0.3s; }
.links a:hover { background: rgba(196,30,58,0.4); }
.links a.active { background: rgba(196,30,58,0.5); border-color: #fff; cursor: default; }

.content { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; flex: 1; }
.inputs { display: flex; flex-direction: column; gap: 18px; }
.field { display: flex; flex-direction: column; }
.field label { font-size: 13px; opacity: 0.8; margin-bottom: 8px; }
.field input, .field select { width: 100%; padding: 18px 16px; border-radius: 14px; border: 1px solid var(--border); background: rgba(0,0,0,0.55); color: #fff; font-size: 18px; font-weight: 500; }
.field input:focus, .field select:focus { outline: none; border-color: var(--accent); }

.checkbox-field { display: flex; align-items: center; gap: 10px; font-size: 16px; margin: 10px 0; }

.outputs { display: flex; flex-direction: column; gap: 30px; }
.results { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; }
.result { background: rgba(0,0,0,0.5); border: 1px solid var(--border); border-radius: 14px; padding: 20px; text-align: center; display: flex; flex-direction: column; justify-content: center; }
.result span { display: block; font-size: 13px; opacity: 0.7; margin-bottom: 8px; }
.result strong { font-size: 28px; color: var(--accent); }

/* Specific color classes */
.result.powder strong { color: var(--powder-color); }
.result.ba strong { color: var(--ba-color); }
.result.bb strong { color: var(--bb-color); }
.result.extra-solvent strong { color: var(--extra-solvent-color); }
.result.carrier strong { color: var(--carrier-color); }

.final-yield { grid-column: 1 / -1; background: rgba(196,30,58,0.2); border: 2px solid var(--accent); padding: 30px; font-size: 32px; }

.chart-container { position: relative; height: 380px; background: rgba(0,0,0,0.5); border: 1px solid var(--border); border-radius: 14px; padding: 20px; }

.actions { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
.actions button { padding: 14px 28px; background: rgba(196,30,58,0.2); border: 1px solid var(--accent); border-radius: 12px; color: #fff; font-weight: 600; cursor: pointer; transition: background 0.3s; }
.actions button:hover { background: rgba(196,30,58,0.4); }

.footer { margin-top: 30px; font-size: 11px; opacity: 0.5; text-align: right; }

@media (max-width: 900px) {
  .content { grid-template-columns: 1fr; }
  .results { grid-template-columns: 1fr; }
}

.hidden { display: none !important; }
</style>
</head>
<body>

<div class="panel" id="captureArea">
  <h1>Dinfar Blend Calc</h1>
  <div class="subtitle">Blend steroid solution calculator (up to 3 compounds)</div>

  <div class="links">
    <a href="index.html">Single Compound</a>
    <a href="dinfarblend.html" class="active">Blend Calculator</a>
  </div>

  <div class="content">
    <div class="inputs">
      <!-- All your input fields (same as last version with checkboxes) -->
      <!-- ... (kept exactly the same) ... -->
    </div>

    <div class="outputs">
      <div class="results">
        <!-- Left: What you add -->
        <div class="result powder">
          <span>Compound 1 Powder</span>
          <strong id="powder1">0 g</strong>
        </div>
        <div class="result powder hidden" id="powder2Result">
          <span>Compound 2 Powder</span>
          <strong id="powder2">0 g</strong>
        </div>
        <div class="result powder hidden" id="powder3Result">
          <span>Compound 3 Powder</span>
          <strong id="powder3">0 g</strong>
        </div>

        <div class="result ba">
          <span>BA Volume</span>
          <strong id="baVol">0 ml</strong>
        </div>
        <div class="result ba">
          <span>BA Weight</span>
          <strong id="baWeight">0 g</strong>
        </div>

        <div class="result bb">
          <span>BB Volume</span>
          <strong id="bbVol">0 ml</strong>
        </div>
        <div class="result bb">
          <span>BB Weight</span>
          <strong id="bbWeight">0 g</strong>
        </div>

        <div class="result extra-solvent hidden" id="extraSolventVolResult">
          <span>Extra Solvent Volume</span>
          <strong id="extraSolventVol">0 ml</strong>
        </div>
        <div class="result extra-solvent hidden" id="extraSolventWeightResult">
          <span>Extra Solvent Weight</span>
          <strong id="extraSolventWeight">0 g</strong>
        </div>

        <div class="result carrier">
          <span>Main Carrier Volume</span>
          <strong id="mainCarrierVol">0 ml</strong>
        </div>
        <div class="result carrier">
          <span>Main Carrier Weight</span>
          <strong id="mainCarrierWeight">0 g</strong>
        </div>

        <div class="result carrier hidden" id="secondCarrierVolResult">
          <span>Second Carrier Volume</span>
          <strong id="secondCarrierVol">0 ml</strong>
        </div>
        <div class="result carrier hidden" id="secondCarrierWeightResult">
          <span>Second Carrier Weight</span>
          <strong id="secondCarrierWeight">0 g</strong>
        </div>

        <!-- Right: Info -->
        <div class="result">
          <span>Total Compound Volume</span>
          <strong id="compoundVol">0 ml</strong>
        </div>
        <div class="result">
          <span>Total Brew Volume</span>
          <strong id="totalBrew">0 ml</strong>
        </div>
        <div class="result">
          <span>Volume Check</span>
          <strong id="checkVol">0 ml</strong>
        </div>

        <!-- Final Yield -->
        <div class="result final-yield">
          <span>Final Yield</span>
          <strong id="finalYield">0 ml</strong>
        </div>
      </div>

      <div class="chart-container">
        <canvas id="pieChart"></canvas>
      </div>
    </div>
  </div>

  <div class="actions">
    <button onclick="downloadPDF()">Download as PDF</button>
    <button onclick="downloadDOCX()">Download as DOCX</button>
    <button onclick="goToSingle()">Go to Single Calc</button>
  </div>
</div>

<div class="footer">
  Dinfar Brew Â©
</div>

<!-- Your full script (with your displacement values, checkboxes, vanishing results, etc.) remains the same -->
<!-- Just update the chart colors if you want to match: -->

<script>
/* ... your full script ... */

/* Inside calc(), update chart colors to match: */
const colors = ['#8B0000', '#008000', '#FFD700', extraSolventVol > 0.01 ? '#FF8C00' : null, '#DA70D6'].filter(Boolean);

/* Rest unchanged */
</script>

</body>
</html>
